# BLB3D ERP Database Architecture & UI Workflow

## Database Overview
**24 Tables** organized into 7 main modules:
1. Authentication & Users (2 tables) âœ… NEW
2. Customer Portal (2 tables) âœ… NEW
3. Products & Inventory (4 tables)
4. Manufacturing (4 tables)
5. Sales (3 tables)
6. Purchasing (3 tables)
7. Financial (3 tables)
8. Print Farm (2 tables)
9. Reference Data (1 table)

---

## Entity Relationship Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      AUTHENTICATION & USERS (NEW)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚       USERS          â”‚
                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
                    â”‚ id (PK)              â”‚
                    â”‚ email (UNIQUE)       â”‚
                    â”‚ password_hash        â”‚
                    â”‚ first_name           â”‚
                    â”‚ last_name            â”‚
                    â”‚ phone                â”‚
                    â”‚ company_name         â”‚
                    â”‚ billing_address_*    â”‚
                    â”‚ shipping_address_*   â”‚
                    â”‚ is_active            â”‚
                    â”‚ is_admin             â”‚
                    â”‚ created_at           â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â”‚ 1:N
                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  REFRESH_TOKENS      â”‚
                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
                    â”‚ id (PK)              â”‚
                    â”‚ user_id (FK)         â”‚
                    â”‚ token (UNIQUE)       â”‚
                    â”‚ expires_at           â”‚
                    â”‚ created_at           â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CUSTOMER PORTAL (NEW)                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   USERS          â”‚         â”‚     QUOTES       â”‚         â”‚  SALES_ORDERS    â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚         â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚         â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
    â”‚ id (PK)          â”‚â—„â”€â”€â”€â”€â”   â”‚ id (PK)          â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”‚ id (PK)          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚ user_id (FK)     â”‚    1:1  â”‚ user_id (FK)     â”‚
                             â”‚   â”‚ quote_number     â”‚         â”‚ quote_id (FK)    â”‚
                         1:N â”‚   â”‚ product_name     â”‚         â”‚ order_number     â”‚
                             â”‚   â”‚ quantity         â”‚         â”‚ product_name     â”‚
                             â”‚   â”‚ material_type    â”‚         â”‚ quantity         â”‚
                             â”‚   â”‚ finish           â”‚         â”‚ unit_price       â”‚
                             â”‚   â”‚ unit_price       â”‚         â”‚ total_price      â”‚
                             â”‚   â”‚ total_price      â”‚         â”‚ grand_total      â”‚
                             â”‚   â”‚ status           â”‚         â”‚ status           â”‚
                             â”‚   â”‚ valid_until      â”‚         â”‚ payment_status   â”‚
                             â”‚   â”‚ sales_order_id   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ shipping_*       â”‚
                             â”‚   â”‚ created_at       â”‚         â”‚ tracking_number  â”‚
                             â””â”€â”€â”€â”¤ converted_at     â”‚         â”‚ created_at       â”‚
                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          â”‚ 1:N
                                          â”‚
                                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                 â”‚  QUOTE_FILES     â”‚
                                 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
                                 â”‚ id (PK)          â”‚
                                 â”‚ quote_id (FK)    â”‚
                                 â”‚ filename         â”‚
                                 â”‚ original_filenameâ”‚
                                 â”‚ file_path        â”‚
                                 â”‚ file_size        â”‚
                                 â”‚ uploaded_at      â”‚
                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          PRODUCTS & INVENTORY                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚      PRODUCTS        â”‚ â†â”€â”€â”€â”€â”€â”
                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚        â”‚
                    â”‚ id (PK)             â”‚        â”‚
                    â”‚ sku (UNIQUE)        â”‚        â”‚
                    â”‚ name                â”‚        â”‚
                    â”‚ category            â”‚        â”‚
                    â”‚ selling_price       â”‚        â”‚
                    â”‚ cost                â”‚        â”‚
                    â”‚ has_bom             â”‚        â”‚
                    â”‚ woocommerce_id      â”‚        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
                               â”‚                    â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
              â”‚                â”‚                â”‚   â”‚
              â–¼                â–¼                â–¼   â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚    INVENTORY     â”‚ â”‚ BOM_LINES   â”‚ â”‚ SALES_ORDER_LINESâ”‚
   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
   â”‚ id (PK)          â”‚ â”‚ component_idâ”‚ â”‚ product_id (FK)  â”‚
   â”‚ product_id (FK)  â”‚ â”‚   (FK)      â”‚ â”‚ sales_order_id   â”‚
   â”‚ location_id (FK) â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ quantity         â”‚
   â”‚ on_hand_quantity â”‚                 â”‚ unit_price       â”‚
   â”‚ allocated_qty    â”‚                 â”‚ total            â”‚
   â”‚ available_qty    â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚ lot_number       â”‚
   â”‚ cost_per_unit    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â””â”€â”¤ INVENTORY_LOCATIONS  â”‚
              â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
              â”‚ id (PK)              â”‚
              â”‚ name                 â”‚
              â”‚ code (UNIQUE)        â”‚
              â”‚ type                 â”‚
              â”‚ parent_id (FK)       â”‚â† Self-referencing
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   (hierarchical)

   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  INVENTORY_TRANSACTIONS      â”‚â† History/Audit Log
   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
   â”‚ id (PK)                      â”‚
   â”‚ product_id (FK)              â”‚
   â”‚ location_id (FK)             â”‚
   â”‚ transaction_type             â”‚
   â”‚ quantity                     â”‚
   â”‚ reference_type               â”‚â† Links to orders
   â”‚ reference_id                 â”‚
   â”‚ created_at                   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            MANUFACTURING                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   PRODUCTS       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”‚      BOMS        â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚         â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
    â”‚ id (PK)          â”‚         â”‚ id (PK)          â”‚
    â”‚ has_bom          â”‚         â”‚ product_id (FK)  â”‚â† Finished good
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚ code (UNIQUE)    â”‚
            â–²                    â”‚ name             â”‚
            â”‚                    â”‚ total_cost       â”‚
            â”‚                    â”‚ version          â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”           â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚               â”‚                    â”‚
    â”‚               â”‚                    â–¼
    â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         â”‚   BOM_LINES     â”‚  â”‚ PRODUCTION   â”‚
    â”‚         â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚   ORDERS     â”‚
    â”‚         â”‚ id (PK)         â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
    â”‚         â”‚ bom_id (FK)     â”‚â”€â”€â”¤ id (PK)      â”‚
    â”‚         â”‚ component_id(FK)â”‚  â”‚ code         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ quantity        â”‚  â”‚ product_id   â”‚
              â”‚ sequence        â”‚  â”‚ bom_id (FK)  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ quantity     â”‚
                                   â”‚ status       â”‚
                                   â”‚ due_date     â”‚
                                   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          â–¼
                                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                   â”‚ PRINT_JOBS   â”‚
                                   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
                                   â”‚ id (PK)      â”‚
                                   â”‚ production_  â”‚
                                   â”‚   order_id   â”‚
                                   â”‚ printer_id   â”‚
                                   â”‚ status       â”‚
                                   â”‚ gcode_file   â”‚
                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              SALES FLOW                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   CUSTOMERS      â”‚         â”‚  SALES_ORDERS    â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚         â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
    â”‚ id (PK)          â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”‚ id (PK)          â”‚
    â”‚ code (UNIQUE)    â”‚         â”‚ customer_id (FK) â”‚
    â”‚ name             â”‚         â”‚ code (UNIQUE)    â”‚
    â”‚ email            â”‚         â”‚ status           â”‚
    â”‚ credit_limit     â”‚         â”‚ order_date       â”‚
    â”‚ woocommerce_id   â”‚         â”‚ due_date         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚ total            â”‚
                                 â”‚ payment_status   â”‚
                                 â”‚ woocommerce_id   â”‚
                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          â–¼
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚ SALES_ORDER_LINES    â”‚
                              â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
                              â”‚ id (PK)              â”‚
                              â”‚ sales_order_id (FK)  â”‚
                              â”‚ product_id (FK) â”€â”€â”€â”€â–ºâ”‚
                              â”‚ quantity             â”‚
                              â”‚ unit_price           â”‚
                              â”‚ allocated_quantity   â”‚
                              â”‚ shipped_quantity     â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            PURCHASING FLOW                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚    VENDORS       â”‚         â”‚ PURCHASE_ORDERS  â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚         â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
    â”‚ id (PK)          â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”‚ id (PK)          â”‚
    â”‚ code (UNIQUE)    â”‚         â”‚ vendor_id (FK)   â”‚
    â”‚ name             â”‚         â”‚ code (UNIQUE)    â”‚
    â”‚ email            â”‚         â”‚ status           â”‚
    â”‚ payment_terms    â”‚         â”‚ order_date       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚ due_date         â”‚
                                 â”‚ total            â”‚
                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          â–¼
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚ PURCHASE_ORDER_LINES â”‚
                              â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
                              â”‚ id (PK)              â”‚
                              â”‚ purchase_order_id(FK)â”‚
                              â”‚ product_id (FK) â”€â”€â”€â”€â–ºâ”‚
                              â”‚ quantity             â”‚
                              â”‚ unit_cost            â”‚
                              â”‚ received_quantity    â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              FINANCIAL                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚    ACCOUNTS      â”‚         â”‚ JOURNAL_ENTRIES  â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚         â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
    â”‚ id (PK)          â”‚â—„â”€â”€â”€â”€â”   â”‚ id (PK)          â”‚
    â”‚ code (UNIQUE)    â”‚     â”‚   â”‚ code (UNIQUE)    â”‚
    â”‚ name             â”‚     â”‚   â”‚ entry_date       â”‚
    â”‚ type             â”‚     â”‚   â”‚ status           â”‚
    â”‚ parent_id (FK)   â”‚â”€â”˜   â”‚   â”‚ reference_type   â”‚â† Links to
    â”‚ balance          â”‚     â”‚   â”‚ reference_id     â”‚  orders
    â”‚ quickbooks_id    â”‚     â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚            â”‚
                             â”‚            â–¼
                             â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                             â”‚   â”‚  JOURNAL_LINES   â”‚
                             â”‚   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
                             â”‚   â”‚ id (PK)          â”‚
                             â””â”€â”€â”€â”¤ account_id (FK)  â”‚
                                 â”‚ journal_entry_id â”‚
                                 â”‚ debit            â”‚
                                 â”‚ credit           â”‚
                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Key Relationships & Data Flow

### NEW: **USERS** (Authentication & Customer Portal) âœ…
- Central table for customer portal authentication
- Links to: quotes (1:N), sales_orders (1:N), refresh_tokens (1:N)
- JWT authentication with bcrypt password hashing
- Stores billing and shipping addresses

### NEW: **REFRESH_TOKENS** âœ…
- Stores JWT refresh tokens for session management
- Links: `user_id` â†’ `users.id`
- 7-day expiration, automatic cleanup
- Token rotation on refresh

### NEW: **QUOTES** (Customer Portal) âœ…
- Customer quote requests from portal
- Links: `user_id` â†’ `users.id` (customer)
- Links: `sales_order_id` â†’ `sales_orders.id` (when converted)
- Has many: quote_files (3MF uploads)
- 30-day validity, auto-approval logic
- Status: draft â†’ pending â†’ accepted/rejected

### NEW: **QUOTE_FILES** âœ…
- Uploaded 3MF files for quotes
- Links: `quote_id` â†’ `quotes.id`
- Multi-file support per quote
- File validation and storage metadata

### NEW: **SALES_ORDERS** (Redesigned for Customer Portal) âœ…
- Customer orders converted from accepted quotes
- Links: `user_id` â†’ `users.id` (customer)
- Links: `quote_id` â†’ `quotes.id` (1:1 relationship)
- Sequential order numbering: SO-YYYY-NNN
- Status tracking: pending â†’ confirmed â†’ in_production â†’ shipped â†’ delivered â†’ completed
- Payment tracking (ready for Stripe integration)
- Shipping tracking (ready for carrier API)

### 1. **PRODUCTS** (Central Hub)
- Referenced by: Inventory, BOMs, Sales Orders, Purchase Orders, Production Orders
- Has self-reference through BOM_LINES (products can be components of other products)

### 2. **INVENTORY** â†’ Tracks product quantities by location
- Links: `product_id` â†’ `products.id`
- Links: `location_id` â†’ `inventory_locations.id`
- Calculated field: `available_quantity = on_hand_quantity - allocated_quantity`

### 3. **BOMS** (Bill of Materials) â†’ Manufacturing recipes
- Links: `product_id` â†’ `products.id` (finished good)
- Contains multiple `bom_lines` with `component_id` â†’ `products.id` (raw materials)

### 4. **SALES_ORDERS** â†’ Customer orders
- Links: `customer_id` â†’ `customers.id`
- Links to `sales_order_lines` â†’ `product_id` â†’ `products.id`
- Triggers: Production Orders, Inventory Allocation

### 5. **PRODUCTION_ORDERS** â†’ Manufacturing work orders
- Links: `product_id` â†’ `products.id` (what to make)
- Links: `bom_id` â†’ `boms.id` (how to make it)
- Can create `print_jobs` for 3D printing

---

## Data Current State (After Migration)

```
PRODUCTS:              633 records
  â”œâ”€ Finished Goods:   619
  â”œâ”€ Supplies:         12
  â””â”€ Components:       2

INVENTORY_LOCATIONS:   7 locations
  â”œâ”€ General:          383 units
  â”œâ”€ Filament Storage: 70,103 units (main storage)
  â”œâ”€ Finished Goods:   1,396 units
  â””â”€ Packaging:        678 units

INVENTORY:             196 records
  â””â”€ Total Units:      72,560 units

BOMS:                  68 recipes
  â””â”€ BOM_LINES:        167 components

CUSTOMERS:             165 customers
  â””â”€ Top: Shopify store (9 orders)

VENDORS:               69 vendors
  â””â”€ Top: Bambu Labs, Amazon, Sunlu

SALES_ORDERS:          213 orders
  â”œâ”€ Completed:        184 ($4,012)
  â”œâ”€ Draft:            20 ($180)
  â””â”€ Cancelled:        9 ($392)

SALES_ORDER_LINES:     256 line items
```

---

## UI Workflow Guide

### **1. Dashboard (Home Screen)**

**Purpose:** High-level overview of business operations

**Data Sources:**
- `sales_orders` â†’ Recent orders, revenue trends
- `production_orders` â†’ Current manufacturing status
- `inventory` â†’ Low stock alerts
- `print_jobs` â†’ Printer farm status

**UI Components:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š BLB3D ERP Dashboard                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  ğŸ’° Revenue (30 days)        ğŸ­ Production         â”‚
â”‚     $4,583.75                   5 Active Orders    â”‚
â”‚     â†‘ 12% vs last month         2 Pending          â”‚
â”‚                                                     â”‚
â”‚  ğŸ“¦ Inventory Alerts         ğŸ–¨ï¸ Print Farm         â”‚
â”‚     3 Low Stock Items           8/10 Printers Idle â”‚
â”‚     1 Overstock Item            2 Printing         â”‚
â”‚                                                     â”‚
â”‚  ğŸ“‹ Recent Orders                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ CO-00225  Austin Myers      $93.46       â”‚     â”‚
â”‚  â”‚ CO-00224  Peggy madore      $34.48       â”‚     â”‚
â”‚  â”‚ CO-00223  Anjila Katuwal    Pending      â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                     â”‚
â”‚  [View All Orders] [Create Order] [Production]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**SQL Queries:**
```sql
-- Recent revenue
SELECT SUM(total) FROM sales_orders
WHERE order_date >= DATEADD(day, -30, GETDATE());

-- Active production
SELECT COUNT(*) FROM production_orders
WHERE status = 'in_progress';

-- Low stock alerts
SELECT p.sku, p.name, SUM(i.available_quantity)
FROM products p
JOIN inventory i ON p.id = i.product_id
GROUP BY p.id, p.sku, p.name
HAVING SUM(i.available_quantity) < 10;
```

---

### **2. Products Module**

**Purpose:** Manage product catalog (finished goods, materials, components)

**Main View - Product List:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“¦ Products                              [+ New]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Filter: [All â–¼] [Search: _____________] ğŸ”         â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â” â”‚
â”‚  â”‚ SKU    â”‚ Name             â”‚ Cat. â”‚ Stockâ”‚ $  â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ A-00086â”‚ Flexi Skeleton   â”‚ FG   â”‚ 12   â”‚25.0â”‚ â”‚
â”‚  â”‚ M-00044â”‚ PLA Filament BG  â”‚ MAT  â”‚7,714 â”‚ 5.0â”‚ â”‚
â”‚  â”‚ C-00001â”‚ Luxe Keychain    â”‚ CUS  â”‚ 0    â”‚40.0â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜ â”‚
â”‚                                                     â”‚
â”‚  Showing 20 of 633 products            [1][2][3]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Product Detail View:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“¦ A-00086 - Flexi Factory Skeleton Mastadon      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [General] [Inventory] [BOM] [History] [Orders]    â”‚
â”‚                                                     â”‚
â”‚  General Information                                â”‚
â”‚  â”œâ”€ SKU: A-00086                                   â”‚
â”‚  â”œâ”€ Category: Finished Goods                       â”‚
â”‚  â”œâ”€ Selling Price: $25.00                          â”‚
â”‚  â”œâ”€ Cost: $8.50                                    â”‚
â”‚  â””â”€ Has BOM: Yes â”€â”€â”€â”€â”€â–º [View BOM: BO-00086]      â”‚
â”‚                                                     â”‚
â”‚  Current Inventory                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Location         â”‚ On   â”‚ Allocatedâ”‚ Availableâ”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ Finished Goods   â”‚ 12   â”‚ 2        â”‚ 10       â”‚ â”‚
â”‚  â”‚ Production Area  â”‚ 3    â”‚ 0        â”‚ 3        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                     â”‚
â”‚  [Adjust Stock] [Create Production] [Edit Product] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**SQL Queries:**
```sql
-- Product list with inventory
SELECT
    p.sku, p.name, p.category, p.selling_price,
    SUM(i.available_quantity) as total_stock
FROM products p
LEFT JOIN inventory i ON p.id = i.product_id
WHERE p.active = 1
GROUP BY p.id, p.sku, p.name, p.category, p.selling_price
ORDER BY p.sku;

-- Product detail with BOM
SELECT p.*, b.id as bom_id, b.code as bom_code
FROM products p
LEFT JOIN boms b ON p.id = b.product_id AND b.active = 1
WHERE p.id = @product_id;
```

---

### **3. Sales Module**

**Purpose:** Manage customer orders from quote to fulfillment

**Sales Order List:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ’¼ Sales Orders                         [+ New]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Status: [All â–¼] Customer: [All â–¼] [Search] ğŸ”     â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Order  â”‚ Customer  â”‚ Date     â”‚ Total  â”‚Statusâ”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚CO-00225â”‚Austin M.  â”‚07/19/2025â”‚ $93.46 â”‚CANC â”‚â”‚
â”‚  â”‚CO-00224â”‚Peggy M.   â”‚05/16/2025â”‚ $34.48 â”‚CANC â”‚â”‚
â”‚  â”‚CO-00221â”‚Shopify    â”‚05/06/2025â”‚ $16.00 â”‚DRAFTâ”‚â”‚
â”‚  â”‚CO-00218â”‚Morgan M.  â”‚05/04/2025â”‚$119.50 â”‚DRAFTâ”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                     â”‚
â”‚  213 orders  |  Revenue: $4,583.75      [Export]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Order Detail View:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ’¼ Sales Order: CO-00218                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Customer: Morgan Myers (CU-00162)                  â”‚
â”‚  Order Date: May 4, 2025  |  Status: DRAFT          â”‚
â”‚  Due Date: May 18, 2025   |  Payment: Unpaid        â”‚
â”‚                                                     â”‚
â”‚  Order Lines:                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ #  â”‚ SKU     â”‚ Product    â”‚ Qtyâ”‚ Priceâ”‚ Total  â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚ 1  â”‚ A-00086 â”‚ Flexi Skel â”‚ 2  â”‚$25.00â”‚ $50.00 â”‚â”‚
â”‚  â”‚ 2  â”‚ FF-ST   â”‚ Sea Turtle â”‚ 3  â”‚$12.00â”‚ $36.00 â”‚â”‚
â”‚  â”‚ 3  â”‚ A-00055 â”‚ Tornador   â”‚ 1  â”‚$33.50â”‚ $33.50 â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                     â”‚
â”‚  Subtotal: $119.50                                  â”‚
â”‚  Tax: $0.00                                         â”‚
â”‚  Total: $119.50                                     â”‚
â”‚                                                     â”‚
â”‚  Fulfillment:                                       â”‚
â”‚  â”œâ”€ A-00086: âœ… 2 available (Finished Goods)       â”‚
â”‚  â”œâ”€ FF-ST:   âš ï¸  Need 3, have 2 (Need Production)  â”‚
â”‚  â””â”€ A-00055: âœ… 1 available (Finished Goods)       â”‚
â”‚                                                     â”‚
â”‚  [Confirm Order] [Create Production] [Allocate]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Workflow:**
1. **Create Order** â†’ Select customer, add products
2. **Check Inventory** â†’ System shows availability
3. **Allocate Stock** â†’ Reserve inventory (update `allocated_quantity`)
4. **Create Production** â†’ If needed, create production orders
5. **Ship Order** â†’ Update `shipped_quantity`, create inventory transaction
6. **Mark Complete** â†’ Update status, create journal entries

**SQL Queries:**
```sql
-- Order with line items and availability
SELECT
    sol.id, sol.product_id, p.sku, p.name,
    sol.quantity,
    SUM(i.available_quantity) as available_stock,
    CASE
        WHEN SUM(i.available_quantity) >= sol.quantity
        THEN 'Available'
        ELSE 'Need Production'
    END as fulfillment_status
FROM sales_order_lines sol
JOIN products p ON sol.product_id = p.id
LEFT JOIN inventory i ON p.id = i.product_id
WHERE sol.sales_order_id = @order_id
GROUP BY sol.id, sol.product_id, p.sku, p.name, sol.quantity;

-- Allocate inventory
UPDATE inventory
SET allocated_quantity = allocated_quantity + @qty
WHERE product_id = @product_id AND location_id = @location_id;
```

---

### **4. Manufacturing Module**

**Purpose:** Manage production orders and BOMs

**Production Order List:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ­ Production Orders                    [+ New]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Status: [Active â–¼] [Search: _____________] ğŸ”      â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Order  â”‚ Product    â”‚ Qtyâ”‚ Due Date â”‚ Status  â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ PO-001 â”‚ FF-Seaturtleâ”‚ 10 â”‚ 05/20/25 â”‚ Printingâ”‚ â”‚
â”‚  â”‚ PO-002 â”‚ A-00086    â”‚ 5  â”‚ 05/22/25 â”‚ Scheduledâ”‚ â”‚
â”‚  â”‚ PO-003 â”‚ C-00001    â”‚ 100â”‚ 05/25/25 â”‚ Draft   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                     â”‚
â”‚  [Create from Sales Order] [Create Manual]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Production Order Detail:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ­ Production Order: PO-001                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Product: FF-Seaturtle (Articulating Sea Turtle)    â”‚
â”‚  Quantity: 10 units                                 â”‚
â”‚  Status: In Progress  |  Priority: Normal           â”‚
â”‚  Due: May 20, 2025    |  Started: May 15, 2025     â”‚
â”‚                                                     â”‚
â”‚  BOM: BO-00020 (Active)                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ #  â”‚ Componentâ”‚ Name           â”‚ Need â”‚ Avail  â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚ 1  â”‚ M-00044  â”‚ PLA Filament BGâ”‚ 2kg  â”‚ 7,714kgâ”‚â”‚ âœ…
â”‚  â”‚ 2  â”‚ M-00047  â”‚ TPU Flexible   â”‚ 0.5kgâ”‚ 5,597kgâ”‚â”‚ âœ…
â”‚  â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                     â”‚
â”‚  Material Check: âœ… All materials available         â”‚
â”‚                                                     â”‚
â”‚  Print Jobs:                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ #  â”‚ Printer     â”‚ Status â”‚ Time   â”‚ Progress â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚ 1  â”‚ Bambu X1 #1 â”‚Printingâ”‚ 2h 15m â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘45%â”‚â”‚
â”‚  â”‚ 2  â”‚ Bambu X1 #2 â”‚ Queued â”‚ 2h 10m â”‚ â–‘â–‘â–‘â–‘â–‘  0%â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                     â”‚
â”‚  [Start Production] [Complete] [Consume Materials] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**BOM Management:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“‹ BOM: BO-00020 - Articulating Sea Turtle        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Product: FF-Seaturtle                              â”‚
â”‚  Version: 1  |  Active: Yes  |  Total Cost: $2.50  â”‚
â”‚                                                     â”‚
â”‚  Components:                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Seqâ”‚ Componentâ”‚ Name           â”‚ Qty  â”‚ Cost   â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚ 1  â”‚ M-00044  â”‚ PLA Basic-BG   â”‚200g  â”‚ $1.00  â”‚â”‚
â”‚  â”‚ 2  â”‚ M-00047  â”‚ TPU Flexible   â”‚ 50g  â”‚ $1.50  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                     â”‚
â”‚  Total Materials: 250g  |  Assembly Time: 5 min    â”‚
â”‚                                                     â”‚
â”‚  [Edit BOM] [New Version] [Export] [Cost Analysis] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Workflow:**
1. **Create Production Order**
   - From sales order (auto) or manual
   - Select product â†’ System loads BOM
   - Check material availability

2. **Material Check**
   ```sql
   -- Check if materials are available
   SELECT
       bl.component_id, p.sku, p.name,
       bl.quantity * @production_qty as needed,
       SUM(i.available_quantity) as available,
       CASE
           WHEN SUM(i.available_quantity) >= bl.quantity * @production_qty
           THEN 'OK'
           ELSE 'Short'
       END as status
   FROM bom_lines bl
   JOIN products p ON bl.component_id = p.id
   LEFT JOIN inventory i ON p.id = i.product_id
   WHERE bl.bom_id = @bom_id
   GROUP BY bl.component_id, p.sku, p.name, bl.quantity;
   ```

3. **Start Production**
   - Consume materials (create negative inventory transactions)
   - Create print jobs for 3D printers
   - Update production order status

4. **Complete Production**
   - Receive finished goods (create positive inventory transaction)
   - Record actual costs and times
   - Update inventory

---

### **5. Inventory Module**

**Purpose:** Track and manage stock levels across locations

**Inventory Overview:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“¦ Inventory                            [Adjust]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Location: [All â–¼] Category: [All â–¼] [Search] ğŸ”   â”‚
â”‚                                                     â”‚
â”‚  Summary:                                           â”‚
â”‚  â”œâ”€ Total Items: 196                               â”‚
â”‚  â”œâ”€ Total Units: 72,560                            â”‚
â”‚  â”œâ”€ Total Value: $89,234.50                        â”‚
â”‚  â””â”€ Locations: 6 active                            â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ SKU    â”‚ Product   â”‚ Locationâ”‚ On   â”‚ Avail   â”‚â”‚
â”‚  â”‚        â”‚           â”‚         â”‚ Hand â”‚         â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚M-00044 â”‚PLA Basic  â”‚Filament â”‚7,714 â”‚ 7,714   â”‚â”‚
â”‚  â”‚M-00047 â”‚TPU Flex   â”‚Filament â”‚5,597 â”‚ 5,597   â”‚â”‚
â”‚  â”‚A-00086 â”‚Flexi Skel â”‚Finished â”‚  12  â”‚   10    â”‚â”‚ âš ï¸ 2 allocated
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                     â”‚
â”‚  [Transfer Stock] [Adjust Stock] [Reports]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Stock Adjustment:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœï¸  Adjust Inventory                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Product: [M-00044 - PLA Basic â–¼]                   â”‚
â”‚  Location: [Filament Storage â–¼]                     â”‚
â”‚                                                     â”‚
â”‚  Current Stock: 7,714 kg                            â”‚
â”‚  Allocated: 0 kg                                    â”‚
â”‚  Available: 7,714 kg                                â”‚
â”‚                                                     â”‚
â”‚  Adjustment Type:                                   â”‚
â”‚  ( ) Receipt      - Receiving new stock             â”‚
â”‚  (â€¢) Adjustment   - Correcting quantity             â”‚
â”‚  ( ) Scrap        - Damaged/obsolete                â”‚
â”‚  ( ) Transfer     - Move to another location        â”‚
â”‚                                                     â”‚
â”‚  Quantity: [+______] or [-______]                   â”‚
â”‚  Reason: [________________________________]         â”‚
â”‚                                                     â”‚
â”‚  [Save] [Cancel]                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Inventory Transaction Log:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“‹ Inventory History: M-00044                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Date     â”‚ Type     â”‚ Qty â”‚ Ref    â”‚ By       â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚05/15/2025â”‚Consumptionâ”‚-200gâ”‚ PO-001 â”‚ System   â”‚â”‚
â”‚  â”‚05/10/2025â”‚Receipt   â”‚+1kg â”‚ PO-123 â”‚ Brand B. â”‚â”‚
â”‚  â”‚05/08/2025â”‚Adjustmentâ”‚+50g â”‚ INV-01 â”‚ Brand B. â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**SQL Queries:**
```sql
-- Current inventory with value
SELECT
    p.sku, p.name, l.name as location,
    i.on_hand_quantity, i.allocated_quantity,
    i.available_quantity,
    i.cost_per_unit,
    i.on_hand_quantity * i.cost_per_unit as value
FROM inventory i
JOIN products p ON i.product_id = p.id
JOIN inventory_locations l ON i.location_id = l.id
ORDER BY value DESC;

-- Low stock alerts
SELECT p.sku, p.name, SUM(i.available_quantity) as stock
FROM products p
JOIN inventory i ON p.id = i.product_id
WHERE p.category = 'Finished Goods'
GROUP BY p.id, p.sku, p.name
HAVING SUM(i.available_quantity) < 5;
```

---

### **6. Print Farm Integration**

**Purpose:** Monitor and manage 3D printer fleet

**Printer Dashboard:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ–¨ï¸  Print Farm Status                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Active Printers: 10  |  Utilization: 20%           â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Printer      â”‚ Status â”‚ Job      â”‚ Progress   â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ Bambu X1 #1  â”‚ğŸŸ¢Print â”‚ PJ-001   â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘ 45% â”‚ â”‚
â”‚  â”‚ Bambu X1 #2  â”‚ğŸŸ¢Print â”‚ PJ-002   â”‚ â–ˆâ–ˆâ–ˆâ–‘â–‘â–‘ 30% â”‚ â”‚
â”‚  â”‚ Bambu X1 #3  â”‚ğŸŸ¡ Idle â”‚ -        â”‚ Ready      â”‚ â”‚
â”‚  â”‚ Bambu X1 #4  â”‚ğŸŸ¡ Idle â”‚ -        â”‚ Ready      â”‚ â”‚
â”‚  â”‚ Bambu P1S #1 â”‚ğŸ”´Error â”‚ PJ-003   â”‚ Failed     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                     â”‚
â”‚  Print Queue: 3 jobs                                â”‚
â”‚  Estimated Complete: 2h 45m                         â”‚
â”‚                                                     â”‚
â”‚  [Assign Jobs] [Printer Settings] [Maintenance]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Print Job Detail:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ–¨ï¸  Print Job: PJ-001                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Production Order: PO-001 (FF-Seaturtle)            â”‚
â”‚  Printer: Bambu X1 #1                               â”‚
â”‚  Status: Printing  |  Priority: Normal              â”‚
â”‚                                                     â”‚
â”‚  File: seaturtle_v2.gcode                           â”‚
â”‚  Started: 3:15 PM  |  ETA: 5:30 PM (2h 15m)        â”‚
â”‚  Progress: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 45% (1h done)   â”‚
â”‚                                                     â”‚
â”‚  Material Usage:                                    â”‚
â”‚  â”œâ”€ PLA Basic (Black): 185g / 200g estimated       â”‚
â”‚  â””â”€ Support: 15g                                    â”‚
â”‚                                                     â”‚
â”‚  [Pause] [Cancel] [View Camera]                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### **7. Purchasing Module**

**Purpose:** Manage vendor orders and receiving

**Purchase Order List:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ›’ Purchase Orders                      [+ New]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Status: [All â–¼] Vendor: [All â–¼] [Search] ğŸ”       â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ PO     â”‚ Vendor   â”‚ Date     â”‚ Total  â”‚ Statusâ”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚PO-0045 â”‚Bambu Labsâ”‚05/15/2025â”‚ $450.00â”‚ Sent  â”‚â”‚
â”‚  â”‚PO-0044 â”‚Sunlu     â”‚05/10/2025â”‚ $120.00â”‚Receiv.â”‚â”‚
â”‚  â”‚PO-0043 â”‚Amazon    â”‚05/08/2025â”‚ $89.50 â”‚ Done  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                     â”‚
â”‚  [Receive Order] [Auto-Order (MRP)] [Reports]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Receiving Workflow:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“¥ Receive Purchase Order: PO-0044                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Vendor: Sunlu  |  Order Date: May 10, 2025        â”‚
â”‚  Expected: May 15, 2025  |  Received: May 16, 2025 â”‚
â”‚                                                     â”‚
â”‚  Items to Receive:                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ âœ“  â”‚ SKU     â”‚ Product  â”‚ Orderedâ”‚ Recvâ”‚ Loc â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ âœ“  â”‚ M-00044 â”‚ PLA Blackâ”‚ 10kg   â”‚ 10kgâ”‚ FS  â”‚â”‚
â”‚  â”‚ âœ“  â”‚ M-00047 â”‚ TPU Clearâ”‚ 5kg    â”‚ 5kg â”‚ FS  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                     â”‚
â”‚  FS = Filament Storage                              â”‚
â”‚                                                     â”‚
â”‚  [Complete Receipt] [Partial Receipt] [Cancel]     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

When receiving:
1. Update `received_quantity` in `purchase_order_lines`
2. Create inventory transaction (receipt type)
3. Update inventory `on_hand_quantity`
4. If fully received, mark PO as "Received"

---

### **8. Customer Portal (Future Integration)**

**Purpose:** Allow customers to place orders directly

**Customer View:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸŒ BLB3D Printing - Customer Portal                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Welcome back, Jamie Kline!                         â”‚
â”‚                                                     â”‚
â”‚  ğŸ“¦ My Orders                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ Order  â”‚ Date     â”‚ Total  â”‚ Status â”‚          â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
â”‚  â”‚CO-00010â”‚04/15/2025â”‚ $22.50 â”‚Shipped â”‚ [Track]  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                     â”‚
â”‚  ğŸ›’ Shop Products                                   â”‚
â”‚  [Browse Catalog] [Custom Order] [Upload STL]      â”‚
â”‚                                                     â”‚
â”‚  ğŸ’³ Billing & Payment                               â”‚
â”‚  Credit Available: $500.00 / $1,000.00              â”‚
â”‚  Outstanding: $22.50 (1 invoice)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Key Integration Points

### **WooCommerce Sync**
- `products.woocommerce_product_id` â†’ Links to WordPress/WooCommerce
- `customers.woocommerce_customer_id`
- `sales_orders.woocommerce_order_id`

### **QuickBooks Sync**
- `accounts.quickbooks_id` â†’ Links to accounting software
- `journal_entries` â†’ Export to QuickBooks

### **MQTT for Printers**
- `printers.mqtt_topic` â†’ Real-time printer status
- `print_jobs.status` â†’ Auto-update from printer feedback

---

## Recommended UI Implementation Stack

### **Frontend:**
- **Framework:** React + TypeScript
- **UI Library:** Material-UI (MUI) or Ant Design
- **State Management:** Redux Toolkit or Zustand
- **Data Fetching:** TanStack Query (React Query)
- **Routing:** React Router v6
- **Forms:** React Hook Form + Zod validation
- **Charts:** Recharts or Chart.js

### **Backend API:**
- **Framework:** FastAPI (Python) - Already in project
- **ORM:** SQLAlchemy
- **Authentication:** JWT tokens
- **WebSockets:** For real-time printer status

### **Example API Endpoints:**
```
GET    /api/products              â†’ List products
GET    /api/products/{id}         â†’ Product detail
POST   /api/products              â†’ Create product
PUT    /api/products/{id}         â†’ Update product

GET    /api/inventory             â†’ Inventory list
POST   /api/inventory/adjust      â†’ Adjust stock
GET    /api/inventory/transactions â†’ Transaction history

GET    /api/sales-orders          â†’ Order list
POST   /api/sales-orders          â†’ Create order
PUT    /api/sales-orders/{id}     â†’ Update order
POST   /api/sales-orders/{id}/confirm â†’ Confirm order
POST   /api/sales-orders/{id}/ship    â†’ Ship order

GET    /api/production-orders     â†’ Production list
POST   /api/production-orders     â†’ Create production
POST   /api/production-orders/{id}/start    â†’ Start production
POST   /api/production-orders/{id}/complete â†’ Complete

GET    /api/boms                  â†’ BOM list
GET    /api/boms/{id}             â†’ BOM detail
POST   /api/boms                  â†’ Create BOM

WS     /api/ws/printers           â†’ Real-time printer status
WS     /api/ws/print-jobs         â†’ Real-time job updates
```

---

## Next Steps for UI Development

1. **Phase 1: Core Modules**
   - Dashboard (overview)
   - Products (CRUD)
   - Inventory (view/adjust)

2. **Phase 2: Order Processing**
   - Sales Orders (create/manage)
   - Production Orders (create/manage)
   - BOM Management

3. **Phase 3: Advanced Features**
   - Print Farm integration
   - Purchase Orders
   - Financial tracking

4. **Phase 4: Integrations**
   - WooCommerce sync
   - QuickBooks export
   - Customer portal

Would you like me to create wireframes for any specific module or start building the API endpoints?
