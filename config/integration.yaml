# FilaOps ERP â†” Bambu Print Suite Integration Configuration
# ============================================================

# Integration Mode
# - 'api': REST API communication between services (recommended)
# - 'database': Shared database (not implemented yet)
mode: api

# ERP Service Configuration
erp:
  # API endpoint for ERP service
  api_url: "http://localhost:8000"

  # Optional API key for authentication
  # Leave empty for no authentication during development
  api_key: ""

  # Database connection (for direct queries if needed)
  database:
    host: "localhost\\SQLEXPRESS"
    database: "BLB3D_ERP"
    trusted_connection: true
    # user: ""
    # password: ""

# Bambu Print Suite Configuration
bambu_suite:
  # API endpoint for Bambu Print Suite
  api_url: "http://localhost:8001"

  # Optional API key
  api_key: ""

  # MQTT broker for real-time printer telemetry
  mqtt:
    broker: "localhost"
    port: 1883
    # username: ""
    # password: ""

# Integration Features
# Enable/disable specific integration features
features:
  # Automatically create print jobs in Bambu Suite when production orders are created
  auto_create_print_jobs: true

  # Push real-time status updates from Bambu Suite to ERP
  real_time_updates: true

  # Sync material inventory between ERP and Bambu Suite
  material_sync: true

  # Enable quote-to-order conversion flow
  quote_conversion: true

  # Use ML predictions to update ERP cost estimates
  ml_cost_updates: true

  # Enable printer fleet status sync
  printer_sync: true

# Sync Settings
sync:
  # How often to sync printer status (seconds)
  status_interval: 30

  # How often to check for new production orders (seconds)
  order_check_interval: 60

  # Retry attempts for failed API calls
  retry_attempts: 3

  # Timeout for API requests (seconds)
  timeout: 10

  # Enable auto-retry on connection failures
  auto_retry: true

# Logging
logging:
  level: INFO  # DEBUG, INFO, WARNING, ERROR

  # Log file location
  file: "logs/integration.log"

  # Log rotation
  max_size_mb: 10
  backup_count: 5

# Printer Assignment Strategy
# How to assign print jobs to printers
scheduling:
  # Strategy: 'round_robin', 'least_busy', 'ml_optimized', 'manual'
  strategy: ml_optimized

  # Consider material compatibility
  check_material_compatibility: true

  # Consider current queue length
  check_queue_length: true

  # Use ML predictions for time estimates
  use_ml_predictions: true

# Material Consumption
material:
  # Auto-allocate materials when print job starts
  auto_allocate: true

  # Auto-consume materials when print job completes
  auto_consume: true

  # Default inventory location for print materials
  default_location: "PRODUCTION_AREA"

  # Warn if material below threshold (kg)
  low_stock_threshold: 1.0

# Notifications
notifications:
  # Enable email notifications
  email_enabled: false

  # Email recipients for critical alerts
  alert_emails:
    - "your-email@example.com"

  # Notify on print completion
  notify_on_completion: true

  # Notify on print failure
  notify_on_failure: true

  # Notify on material low stock
  notify_on_low_stock: true

# Development Settings
development:
  # Enable debug mode
  debug: true

  # Mock external API calls (for testing without actual connections)
  mock_apis: false

  # Detailed API request/response logging
  log_api_calls: true
